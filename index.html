<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>FF14 M12S HELPER
</title>
<style>
::-webkit-scrollbar {
  width: 0;
  height: 0;
}
body {
  overflow: visible;
}

html,body{margin:0;padding:0;background:transparent;font-family:"Microsoft YaHei",sans-serif;user-select:none;}
.panel{
  background:rgba(17,17,17,0.85);
  padding:10px 12px;
  border-radius:8px;
  color:#C7FE91;
  width:460px;
  box-sizing:border-box;
  position:relative;
  overflow: visible; 
}

.line{margin:4px 0;}
.line.blue{color:#82FDFF;}
.top-bar{
  display:flex;
  align-items:center;
  justify-content:flex-end;
  gap:6px;
  margin-bottom:6px;
}
select{padding:4px;border-radius:4px;border:none;background:#222;color:white;font-size:14px;margin-right:10px;}
.content{display:flex;justify-content:space-between;}
.text-area{flex:1;margin-right:10px;}
.buttons{display:flex;flex-direction:column;flex:0 0 200px;}
.buttons-row{display:flex;justify-content:space-between;margin:2px 0;}
.buttons-row button{flex:0 0 95px;padding:6px;background:black;color:white;border:none;border-radius:4px;cursor:pointer;}
.buttons-row button.active{background:white;color:black;}
.fake-select {
  position: relative;
  background: #222;
  color: white;
  border-radius: 4px;
  font-size: 14px;
  cursor: pointer;
  min-width: 140px;
}

.fake-select .selected {
  padding: 4px 8px;
}

.fake-select .options {
  display: none;
  position: absolute;
  top: 100%;
  left: 0;
  background: #222;
  border-radius: 4px;
  margin-top: 2px;
  z-index: 9999;
}

.fake-select .options div {
  padding: 4px 8px;
}

.fake-select .options div:hover {
  background: #444;
}


.panel {
  --panel-alpha: 0.85;
  background: rgba(18, 20, 23, var(--panel-alpha));
  border: 2px solid rgba(50, 65, 85, calc(var(--panel-alpha) + 0.05));
  box-shadow:
    inset 0 0 0 1px rgba(90, 115, 135, calc(var(--panel-alpha) * 0.6)),
    inset 0 0 0 2px rgba(130, 155, 180, calc(var(--panel-alpha) * 0.35)),
    0 3px 8px rgba(0,0,0,var(--panel-alpha));

  border-radius: 4px;
}

.panel::before {
  content:"";
  position:absolute;
  inset:2px;
  border: 1px solid rgba(180,200,230, calc(var(--panel-alpha) * 0.35));
  border-radius:3px;
  pointer-events:none;
}




.top-bar label {
  margin-right: 10px;
}
.fake-select {
  background: rgba(40,40,45,0.85);
  border: 1px solid rgba(255,255,255,0.18);
}
.fake-select .selected {
  color: #eef;
}
.fake-select .options {
  border: 1px solid rgba(255,255,255,0.18);
}
.fake-select .options div:hover {
  background: rgba(80,80,95,0.85);
}

input[type="range"] {
  accent-color: #7dcfff;
}

#lines .line {
  font-size: 18px;
  line-height: 1.4;
  padding: 0 4px;
}

.line.result {
  background: linear-gradient(90deg, rgba(0, 140, 210, 0.28), rgba(0, 0, 0, 0));
  border-left: 3px solid rgba(130, 210, 255, 0.9);
  border-radius: 3px;
  box-shadow: 0 0 6px rgba(120, 200, 255, 0.35);
  font-weight: 700;
  padding: 6px 10px;
  width: 100%;
  box-sizing: border-box;
}

.buttons-row button.locked {
  background: rgba(50,50,50,0.5);
  color: #888;
  cursor: not-allowed;
}

.buttons-row button {
  background: rgba(35,35,40,0.9);
  border: 1px solid rgba(255,255,255,0.15);
  transition: background .2s, color .2s;
}
.buttons-row button:hover {
  background: rgba(50,50,60,0.9);
}
.buttons-row button.active {
  background: rgba(0,140,210,0.9);
  color: #fff;
}

.settings {
  margin-left: auto;
  display: flex;
  align-items: center;
  position: relative;
}

#settingsBtn {
  background: rgba(50,50,60,0.9);
  border: 1px solid rgba(120,120,120,0.6);
  color: #eee;
  border-radius: 4px;
  padding: 2px 6px;
  cursor: pointer;
  font-size: 13px;
}

.settings-popout {
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: 6px;
  background: rgba(30,30,35,0.95);
  border: 1px solid rgba(255,255,255,0.18);
  border-radius: 6px;
  padding: 8px 10px;
  display: none;
  min-width: 210px;
  z-index: 9999;
}

.settings-popout.open {
  display: block;
}

.settings-row {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  color: #aaa;
}

.settings-row + .settings-row {
  margin-top: 6px;
}

.settings-row .label {
  min-width: 48px;
}

</style>
</head>
<body>

<div class="panel" id="panel">
  <div id="panelBody">
    <div class="top-bar">
      <div class="settings">
        <button id="resetBtn" style="
          background: rgba(50,50,60,0.9);
          border: 1px solid rgba(120,120,120,0.6);
          color: #eee;
          border-radius: 4px;
          padding: 2px 6px;
          cursor: not-allowed;
          font-size: 13px;
        " disabled>üîÑ</button>
        <button id="settingsBtn" type="button">‚öôÔ∏è</button>
        <div class="settings-popout" id="settingsPopout">
          <div class="settings-row">
            <span class="label">ÊâìÊ≥ï</span>
            <div class="fake-select" id="strategySelect">
              <div class="selected" id="strategySelected">ÁõóÁÅ´Êîπ</div>
              <div class="options" id="strategyOptions"></div>
            </div>
          </div>
          <div class="settings-row">
            <span class="label">ÈÄèÊòéÂ∫¶</span>
            <input
              id="opacityRange"
              type="range"
              min="30"
              max="100"
              value="85"
            >
          </div>
        </div>
      </div>
    </div>

    <div class="content">
      <div class="text-area" id="lines"></div>
      <div class="buttons" id="btnContainer"></div>
    </div>
  </div>

  <div class="resize-hint"></div>
</div>




<script>
// ================== Áä∂ÊÄÅÂèòÈáè ==================
const state={E1:"MTÁªÑÂéªAÔºåSTÁªÑÂéªB",F1:"MTÁªÑÂéª4ÔºåSTÁªÑÂéª3",E2:"14ÁÇπ‰∏äÂÆâÂÖ®",F2:"AÁÇπÂàÜË∫´",G2:"CÁÇπÂàÜË∫´",E3:"ÂàÜÊëä-13Âá∫-ÂàÜÊëä-24Âá∫",E4:"‰∏§‰æß",E5:"DÁÇπ"};
const CIRCLE_NUM=["‚ë†","‚ë°","‚ë¢","‚ë£","‚ë§","‚ë•","‚ë¶","‚ëß"];
const strategies=["ÁõóÁÅ´Êîπ"];
const EMPTY_TEXT = "Á≠âÂæÖÊåâÈíÆ‰∏≠";

let currentStrategy="ÁõóÁÅ´Êîπ";

// ================== ÊåâÈíÆÈÄªËæë ==================
const strategyBtnLogic={
  "ÁõóÁÅ´Êîπ": {
    "Ê≠£ÁÇπÂΩ±Â≠ê":()=>{state.E1="B";state.F1="3ÂàÜÊëä";},
    "ÊñúÁÇπÂΩ±Â≠ê":()=>{state.E1="3";state.F1="BÂàÜÊëä";},
    "A‰∏ä‰∏ãÂàÄ":()=>{state.E2="14ÁÇπ‰∏äÂÆâÂÖ®";state.F2="AÁÇπÂàÜË∫´";state.G2="CÁÇπÂàÜË∫´";},
    "C‰∏ä‰∏ãÂàÄ":()=>{state.E2="23Â§ñË∫≤Èí¢ÈìÅ";state.F2="CÁÇπÂàÜË∫´";state.G2="AÁÇπÂàÜË∫´";},
    "Ê≠£ÁÇπÂàÜÊëä":()=>{state.E3="Êëä-13-Êëä-24";},
    "ÊñúÁÇπÂàÜÊëä":()=>{state.E3="AC-Êëä-BD-Êëä";},
    "ËøõÈªëÊ¥û":()=>{state.E4="‰∏§‰æß";},
    "Ê≤°ËøõÈªëÊ¥û":()=>{state.E4="ÁõÆÊ†áÂúà";},
    "ÂéªDÂπ≥Âè∞":()=>{state.E5="DÁÇπ";},
    "ÂéªBÂπ≥Âè∞":()=>{state.E5="BÁÇπ";}
  }
};

const groupStateKeys = [
  ["E1", "F1"],
  ["E2", "F2", "G2"],
  ["E3"],
  ["E4"],
  ["E5"]
];

function buildRows(){
  const waiting = EMPTY_TEXT;
  const shadowSource = state.E1 === waiting ? waiting : state.E1;
  const shadowTarget = state.F1 === waiting ? waiting : state.F1.replace("ÂàÜÊëä", "");
  const shadowLine = shadowSource === waiting || shadowTarget === waiting
    ? waiting
    : `ÂΩ±Â≠êÂàÜÊëä: ${shadowSource} -> ${shadowTarget}`;

  const platformPrefix = state.E5 === waiting
    ? "D/BÂπ≥Âè∞"
    : state.E5.startsWith("D")
      ? "DÂπ≥Âè∞"
      : "BÂπ≥Âè∞";

  return [
    { index: 1, text: state.E3 === waiting ? waiting : `Ëá™Ë∫´: ${state.E3}` },
    { index: 4, text: shadowLine },
    { index: 7, text: state.E5 === waiting ? waiting : `${platformPrefix} ${state.E5}` }
  ];
}


function refresh(){
  const linesDiv=document.getElementById("lines");
  linesDiv.innerHTML="";
  buildRows().forEach((row)=>{
    const div=document.createElement("div");
    div.className="line result";
    div.innerText=row.text;
    linesDiv.appendChild(div);
  });
}

function resetState() {
  state.E1 = EMPTY_TEXT;
  state.F1 = EMPTY_TEXT;
  state.E2 = EMPTY_TEXT;
  state.F2 = EMPTY_TEXT;
  state.G2 = EMPTY_TEXT;
  state.E3 = EMPTY_TEXT;
  state.E4 = EMPTY_TEXT;
  state.E5 = EMPTY_TEXT;

  btnGroups.forEach(group =>
    group.forEach(btn => btn.classList.remove("active"))
  );

  updateBlackHoleLabel(null);
  refresh();
}



const btnContainer=document.getElementById("btnContainer");
const btnList=[
  ["Ê≠£ÁÇπÂΩ±Â≠ê","ÊñúÁÇπÂΩ±Â≠ê"],
  ["A‰∏ä‰∏ãÂàÄ","C‰∏ä‰∏ãÂàÄ"],
  ["Ê≠£ÁÇπÂàÜÊëä","ÊñúÁÇπÂàÜÊëä"],
  ["ËøõÈªëÊ¥û","Ê≤°ËøõÈªëÊ¥û"],
  ["ÂéªDÂπ≥Âè∞","ÂéªBÂπ≥Âè∞"]
];
const btnGroups=[];
let blackHoleBtn = null;
let noBlackHoleBtn = null;

btnList.forEach((group,i)=>{
  const rowDiv=document.createElement("div");
  rowDiv.className="buttons-row";
  btnGroups[i]=[];
  group.forEach(name=>{
    const btn=document.createElement("button");
    btn.innerText=name;
    btn.dataset.action = name;
    btn.classList.add("locked");      
    btn.disabled = true;              
    btn.onclick=()=>onBtn(i,btn.dataset.action,btn);
    rowDiv.appendChild(btn);
    btnGroups[i].push(btn);
    if (name === "ËøõÈªëÊ¥û") {
      blackHoleBtn = btn;
    }
    if (name === "Ê≤°ËøõÈªëÊ¥û") {
      noBlackHoleBtn = btn;
    }
  });
  btnContainer.appendChild(rowDiv);
});

function updateBlackHoleLabel(prefix){
  if (blackHoleBtn) {
    blackHoleBtn.innerText = prefix ? `${prefix}ËøõÈªëÊ¥û` : "ËøõÈªëÊ¥û";
  }
  if (noBlackHoleBtn) {
    noBlackHoleBtn.innerText = prefix ? `${prefix}Ê≤°ËøõÈªëÊ¥û` : "Ê≤°ËøõÈªëÊ¥û";
  }
}

function onBtn(groupIndex,name,btn){
  if (!btn) return;
  const wasActive = btn.classList.contains("active");
  btnGroups[groupIndex].forEach(b=>b.classList.remove("active"));
  if (wasActive) {
    groupStateKeys[groupIndex].forEach(key => {
      state[key] = EMPTY_TEXT;
    });
    if (groupIndex === 1) {
      updateBlackHoleLabel(null);
    }
    refresh();
    return;
  }
  btn.classList.add("active");
  const logic=strategyBtnLogic[currentStrategy][name];
  if(logic) logic();
  if (groupIndex === 1) {
    updateBlackHoleLabel(name.startsWith("A") ? "A" : "C");
  }
  refresh();
}

const fakeSelect = document.getElementById("strategySelect");
const selectedDiv = document.getElementById("strategySelected");
const optionsDiv = document.getElementById("strategyOptions");

strategies.forEach(s => {
  const div = document.createElement("div");
  div.innerText = s;
  div.onclick = () => {
  currentStrategy = s;
  selectedDiv.innerText = s;
  optionsDiv.style.display = "none";

  btnGroups.forEach(group =>
    group.forEach(btn => {
      btn.disabled = false;
      btn.classList.remove("locked");
    })
  );
    const resetBtn = document.getElementById("resetBtn");
  resetBtn.disabled = false;
  resetBtn.style.background = "rgba(120,40,40,0.8)";
  resetBtn.style.border = "1px solid rgba(255,255,255,0.2)";
  resetBtn.style.color = "#fff";
  resetBtn.style.cursor = "pointer";

  resetState(); 
};
  optionsDiv.appendChild(div);
});

selectedDiv.onclick = () => {
  optionsDiv.style.display =
    optionsDiv.style.display === "block" ? "none" : "block";
};

document.addEventListener("click", e => {
  if (!fakeSelect.contains(e.target)) {
    optionsDiv.style.display = "none";
  }
});


const panel = document.getElementById("panel");
const opacityRange = document.getElementById("opacityRange");
const settingsBtn = document.getElementById("settingsBtn");
const settingsPopout = document.getElementById("settingsPopout");

function setPanelOpacity(value) {
  panel.style.setProperty("--panel-alpha", value / 100);
}

document.getElementById("resetBtn").onclick = () => {
  resetState();
};

opacityRange.oninput = () => {
  setPanelOpacity(opacityRange.value);
};

settingsBtn.onclick = (event) => {
  event.stopPropagation();
  settingsPopout.classList.toggle("open");
};

settingsPopout.addEventListener("click", event => {
  event.stopPropagation();
});

document.addEventListener("click", () => {
  settingsPopout.classList.remove("open");
});

setPanelOpacity(opacityRange.value);
selectedDiv.innerText = currentStrategy;

btnGroups.forEach(group =>
  group.forEach(btn => {
    btn.disabled = false;
    btn.classList.remove("locked");
  })
);

const resetBtn = document.getElementById("resetBtn");
resetBtn.disabled = false;
resetBtn.style.background = "rgba(120,40,40,0.8)";
resetBtn.style.border = "1px solid rgba(255,255,255,0.2)";
resetBtn.style.color = "#fff";
resetBtn.style.cursor = "pointer";

resetState();

</script>
</body>
</html>
